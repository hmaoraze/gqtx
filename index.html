<!doctype html>
<!DOCTYPE html><html lang="zh-CN" style="opacity: 1; font-size: 26.6666px;"><head><meta charset="utf-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="è¿å›½åº†æ¢æ–°é¢œ">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta name="format-detection" content="telphone=no,email=no,address=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="icon" href="img/logo.png">
    <title>
      è¿å›½åº†æ¢æ–°é¢œ-å›½åº†å¤´åƒ
    </title>
    <script charset="utf-8" async="" src="js/jweixin-1.0.0.js">
    </script>

    <script>
      !
      function() {
        var i = 0; !
        function e(t) {
          var n = 40; (document.documentElement.clientWidth !== window.innerWidth || 0 === document.documentElement.clientWidth && 0 === window.innerWidth) && i < 10 ? (document.documentElement.style.opacity = 0, window.setTimeout(e, 0), i++) : (document.documentElement.style.opacity = 0, setTimeout(function() {
            var e = 500 < window.innerWidth ? 500 : window.innerWidth;
            n = parseInt(e / 750 * 1e4 * 40) / 1e4,
            document.documentElement.style.opacity = 1,
            document.documentElement.style.fontSize = n + "px"
          },
          0))
        } ()
      } ()
    </script>
    <script src="js/TGMobileShare-noadtag19.min.js">
    </script>
    <script>
      !
      function(n) {
        "use strict";
        n.loadCSS || (n.loadCSS = function() {});
        var o = loadCSS.relpreload = {};
        if (o.support = function() {
          var e;
          try {
            e = n.document.createElement("link").relList.supports("preload")
          } catch(t) {
            e = !1
          }
          return function() {
            return e
          }
        } (), o.bindMediaToggle = function(t) {
          function e() {
            t.media = a
          }
          var a = t.media || "all";
          t.addEventListener ? t.addEventListener("load", e) : t.attachEvent && t.attachEvent("onload", e),
          setTimeout(function() {
            t.rel = "stylesheet",
            t.media = "only x"
          }),
          setTimeout(e, 3e3)
        },
        o.poly = function() {
          if (!o.support()) for (var t = n.document.getElementsByTagName("link"), e = 0; e < t.length; e++) {
            var a = t[e];
            "preload" !== a.rel || "style" !== a.getAttribute("as") || a.getAttribute("data-loadcss") || (a.setAttribute("data-loadcss", !0), o.bindMediaToggle(a))
          }
        },
        !o.support()) {
          o.poly();
          var t = n.setInterval(o.poly, 500);
          n.addEventListener ? n.addEventListener("load",
          function() {
            o.poly(),
            n.clearInterval(t)
          }) : n.attachEvent && n.attachEvent("onload",
          function() {
            o.poly(),
            n.clearInterval(t)
          })
        }
        "undefined" != typeof exports ? exports.loadCSS = loadCSS: n.loadCSS = loadCSS
      } ("undefined" != typeof global ? global: this)
    </script>
     <link href="css/chunk-nationaldayhead-vendors.0f433423.css"
    rel="stylesheet" as="style" onload="this.onload=null,this.rel=&quot;stylesheet&quot;">
    <noscript>
      &lt;link href="https://qnlite.gtimg.com/qqnewslite/css/chunk-nationaldayhead-vendors.0f433423.css"
      rel="stylesheet"&gt;
    </noscript>
    <link rel="stylesheet" type="text/css" href="css/r-nationaldayhead.6e9074cf.css">
    <script charset="utf-8" src="js/r-nationaldayhead.516767eb.js">
    </script>
    <link rel="stylesheet" type="text/css" href="css/common.css">
  </head>
  <body class="">
    <div id="app">
      <!---->
      <div class="wrapper" style="background-image: url('img/background-image.png');">
        <!-- <img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eruzEDjGnUFZ8czjIvuBY1xh7Fep9T2gPmRxBoczBVgctkgR2zmsibodaiaqqthY65KiaEYtWzMoxCEg/0"
        alt="" class="img-load" style="width: 9.5rem; position: fixed; top: 0px; left: -9999px;"> -->
        <div class="operation-header">
          <!-- <div class="h-logo">
          </div> -->
          <div class="h-title" style="background-image: url('img/title-image.png');">
          </div>
          <div class="h-slogan" style="background-image: url('img/slogan-image.png');">
          </div>
        </div>
        <div class="operation-number">
          ç›®å‰å·²æœ‰&nbsp;
          <span>5222ä¸‡</span>
          &nbsp;äººæ¬¡å‚ä¸æ´»åŠ¨
    
        </div>
        <div class="operation-box">
          <div class="prev">
          </div>
          <div class="operation-img">
            <div class="cropper-content">

                <!--width: 1012px; height: 1012px; transform: scale(0.250324, 0.250324) translate3d(-1515.38px, -1515.38px, 0px) rotateZ(0deg)-->
              <div data-v-6dae58fd="" class="vue-cropper" id="vue-cropper">
                <div data-v-6dae58fd="" class="cropper-box" id="cropper-box">
                 <!--  <div data-v-6dae58fd="" class="cropper-box-canvas" style="">
                   
                 </div> -->
                  <img style="width: 100%;height: 100%;" src="img/head.png" alt="cropper-img" id="cropper-img">
                  <img src="img/hat1.png" class="frame-image" id="FrameImage">
                </div>
                <div data-v-6dae58fd="" class="cropper-drag-box cropper-move">
                </div>
                <div data-v-6dae58fd="" class="cropper-crop-box" style="width: 0px; height: 0px; transform: translate3d(0px, 0px, 0px); display: none;">
                  <span data-v-6dae58fd="" class="cropper-view-box">
                    <!-- <img data-v-6dae58fd="" src="blob:https://rl.inews.qq.com/ea5cb9d2-d588-467b-86c7-cc3b33cd260b"
                    alt="cropper-img" style="width: 1012px; height: 1012px; transform: scale(0.250324, 0.250324) translate3d(-1515.38px, -1515.38px, 0px) rotateZ(0deg);"> -->
                  </span>
                  <span data-v-6dae58fd="" class="cropper-face cropper-move">
                  </span>
                  <!---->
                  <!---->
                </div>
              </div>
            </div>
          </div>
          <div class="next">
          </div>
        </div>
          <div class="operation-btns">
          <div class="file-upload-container" id="fileUploadContainer">
            <input type="file" id="fle" accept="image/*" style="display: none;">
            <button type="button" id="up_button" class="button_qwe">
              <span class="button-icon">ğŸ“</span>
              <span class="button-text">ä¸Šä¼ å›¾ç‰‡</span>
            </button>
            <div class="upload-hint">æ”¯æŒæ‹–æ”¾å›¾ç‰‡åˆ°æ­¤å¤„</div>
          </div>
        </div>
        <div class="operation-btns">
          <!-- <div class="o-btn o-btn2" style="background-image:none;">
          
          
          </div> -->
          <button type="button" id="create" style="display: none;" class="button_qwe">
            <span class="button-icon">âœ¨</span>
            <span class="button-text">ç”Ÿæˆå¤´åƒ</span>
          </button>  
        </div>
          <div class="operation-btns">
            <button type="button" id="down_button" style="display: none;" class="button_qwe">
              <span class="button-icon">ğŸ’¾</span>
              <span class="button-text">ä¸‹è½½å¤´åƒ</span>
            </button>  
          </div>

        
        <!---->
        
        <div class="shade-box" style="display:none;z-index: 2004;width: 100%;height: 100%;position: fixed;top: 0;left: 0; background: rgba(0,0,0,0.3);"></div>
        <div class="van-popup van-popup--center" style="z-index: 2005;display: none;">
          <div class="long-press">
            <div class="l-img">
              <img id="head_img" src="data:image/png;bas5Ch/78WAENtJv2RKgAAAABJRU5ErkJggg==">
            </div>
            <div class="l-tips">
              é•¿æŒ‰ä¿å­˜å›¾åƒ
            </div>
          </div>
        </div>

       
      </div>
    </div>

    
    <script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>

   <script src="js/chunk-vendors.836075e1.js"></script>
     <script src="js/chunk-nationaldayhead-vendors.0ea1c589.js"></script>

    <!--<script src="https://qnlite.gtimg.com/qqnewslite/js/nationaldayhead.5241bf47.js"></script> -->
     <script src="js/WXJssdk.js"> </script>
     <script src="js/qqapi.js?_bid=152"> </script>
   
     <!-- <script type="text/javascript" src="https://mat1.gtimg.com/bbs/static/html2canvas.min.js" charset="utf-8"> </script> -->
    <script src="js/html2canvas.min.js"></script>


    <script type="text/javascript">
       var FrameImage = ['img/head0.png','img/head1.png','img/head2.png','img/head3.png','img/head4.png','img/head5.png','img/head6.png','img/head7.png','img/hat8.png','img/hat9.png','img/hat10.png','img/hat11.png','img/hat12.png','img/hat13.png','img/hat14.png','img/hat15.png','img/hat16.png','img/hat17.png','img/hat18.png','img/hat19.png','img/hat20.png','img/hat21.png','img/hat22.png','img/hat23.png'];
       var indexS = 0;
    
    function changeThemeType() {};

    // å³åˆ‡æ¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    $('.next').on('click', function() {
        // æ·»åŠ ç‚¹å‡»åŠ¨ç”»æ•ˆæœ
        $(this).addClass('pulse');
        setTimeout(() => {
            $(this).removeClass('pulse');
        }, 500);
        
        // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¤´åƒæ¡†
        indexS++;
        if (indexS >= FrameImage.length) {
            indexS = 0;
        }
        
        // æ›´æ–°å¤´åƒæ¡†å›¾ç‰‡
        $('#FrameImage').attr('src', FrameImage[indexS]);
        
        // æ·»åŠ åˆ‡æ¢åŠ¨ç”»æ•ˆæœ
        $('#FrameImage').fadeOut(100, function() {
            $(this).fadeIn(200);
        });
        
        console.log('å½“å‰å¤´åƒæ¡†ç´¢å¼•:', indexS);
    });
    
    // å·¦åˆ‡æ¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    $('.prev').on('click', function() {
        // æ·»åŠ ç‚¹å‡»åŠ¨ç”»æ•ˆæœ
        $(this).addClass('pulse');
        setTimeout(() => {
            $(this).removeClass('pulse');
        }, 500);
        
        // åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªå¤´åƒæ¡†
        indexS--;
        if (indexS < 0) {
            indexS = FrameImage.length - 1;
        }
        
        // æ›´æ–°å¤´åƒæ¡†å›¾ç‰‡
        $('#FrameImage').attr('src', FrameImage[indexS]);
        
        // æ·»åŠ åˆ‡æ¢åŠ¨ç”»æ•ˆæœ
        $('#FrameImage').fadeOut(100, function() {
            $(this).fadeIn(200);
        });
        
        console.log('å½“å‰å¤´åƒæ¡†ç´¢å¼•:', indexS);
    });
    //ä¸Šä¼ 
    $(document).on('click', '#up_button', function() {
      var fileInput = document.getElementById('fle');
      
      // è§¦å‘æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†
      if (fileInput) {
        fileInput.click();
      } else {
        console.error('æ–‡ä»¶è¾“å…¥å…ƒç´ æœªæ‰¾åˆ°');
        showNotification('ç³»ç»Ÿé”™è¯¯ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
      }
    });

    // ç›‘å¬æ–‡ä»¶é€‰æ‹©å˜åŒ–
    $(document).on('change', '#fle', function(e) {
      handleFileSelection(e.target.files[0]);
    });

    // æ‹–æ”¾ä¸Šä¼ åŠŸèƒ½
    var fileUploadContainer = document.getElementById('fileUploadContainer');
    
    // é˜»æ­¢é»˜è®¤æ‹–æ”¾è¡Œä¸º
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      fileUploadContainer.addEventListener(eventName, preventDefaults, false);
      document.body.addEventListener(eventName, preventDefaults, false);
    });
    
    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }
    
    // æ·»åŠ æ‹–æ”¾é«˜äº®æ•ˆæœ
    ['dragenter', 'dragover'].forEach(eventName => {
      fileUploadContainer.addEventListener(eventName, highlight, false);
    });
    
    ['dragleave', 'drop'].forEach(eventName => {
      fileUploadContainer.addEventListener(eventName, unhighlight, false);
    });
    
    function highlight() {
      fileUploadContainer.classList.add('drag-over');
    }
    
    function unhighlight() {
      fileUploadContainer.classList.remove('drag-over');
    }
    
    // å¤„ç†æ‹–æ”¾çš„æ–‡ä»¶
    fileUploadContainer.addEventListener('drop', handleDrop, false);
    
    function handleDrop(e) {
      var dt = e.dataTransfer;
      var files = dt.files;
      
      if (files.length > 0) {
        handleFileSelection(files[0]);
      }
    }
    
    // å¤„ç†æ–‡ä»¶é€‰æ‹©çš„é€šç”¨å‡½æ•°
    function handleFileSelection(file) {
      // æ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†æ–‡ä»¶
      if (!file) {
        return;
      }
      
      // æ£€æŸ¥æ–‡ä»¶ç±»å‹
      if (!file.type.match('image.*')) {
        showNotification('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼', 'error');
        return;
      }
      
      // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé™åˆ¶ä¸º4MBï¼‰
      var maxSize = 4 * 1024 * 1024; // 4MB
      if (file.size > maxSize) {
        showNotification('ä¸Šä¼ å¤±è´¥ï¼Œè¯·ä¸Šä¼ ä¸å¤§äº4Mçš„å›¾ç‰‡ï¼', 'error');
        return;
      }
      
      // è¯»å–å¹¶æ˜¾ç¤ºå›¾ç‰‡
      var reader = new FileReader();
      
      reader.onload = function(event) {
        try {
          // æ˜¾ç¤ºå›¾ç‰‡
          $('#cropper-img').attr('src', event.target.result);
          
          // æ˜¾ç¤ºç”Ÿæˆå¤´åƒæŒ‰é’®
          $('#create').css('display', 'inline-block');
          
          // æ·»åŠ æˆåŠŸåé¦ˆ
          $('#up_button .button-text').text('ä¸Šä¼ æˆåŠŸ');
          setTimeout(() => {
            $('#up_button .button-text').text('ä¸Šä¼ å›¾ç‰‡');
          }, 2000);
          
          showNotification('å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼', 'success');
          
        } catch (error) {
          console.error('å›¾ç‰‡å¤„ç†é”™è¯¯:', error);
          showNotification('å›¾ç‰‡å¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
        }
      };
      
      reader.onerror = function() {
        console.error('æ–‡ä»¶è¯»å–é”™è¯¯');
        showNotification('æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
      };
      
      // è¯»å–æ–‡ä»¶
      reader.readAsDataURL(file);
    }
    
    // æ˜¾ç¤ºé€šçŸ¥çš„å‡½æ•°
    function showNotification(message, type) {
      // åˆ›å»ºé€šçŸ¥å…ƒç´ 
      var notification = $('<div class="notification ' + type + '">' + message + '</div>');
      
      // æ·»åŠ åˆ°é¡µé¢
      $('body').append(notification);
      
      // æ˜¾ç¤ºåŠ¨ç”»
      setTimeout(() => {
        notification.addClass('show');
      }, 10);
      
      // è‡ªåŠ¨éšè—
      setTimeout(() => {
        notification.removeClass('show');
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 3000);
    }


    //è¿™æ˜¯å¦ä¸€ç§å†™æ³•
    $(function () {
        $(document).on('click', '#create', function () {
            // æ·»åŠ åŠ è½½çŠ¶æ€
            var originalText = $("#create .button-text").text();
            $("#create .button-text").text("ç”Ÿæˆä¸­...");
            $("#create").addClass("loading");
            $("#create").prop("disabled", true);
            
            try {
                var width = $('#cropper-box').width();
                var height = $('#cropper-box').height();
                var canvasBox = document.createElement("canvas"); 
                var scale = window.devicePixelRatio; 
                var rect = $('#cropper-box').get(0).getBoundingClientRect(); 
                canvasBox.width = width * scale; 
                canvasBox.height = height * scale; 

                canvasBox.style.width = width + "px";
                canvasBox.style.height = height + "px";
                canvasBox.getContext("2d").scale(scale, scale); 
                canvasBox.getContext("2d").translate(-rect.left, -rect.top); 

                setTimeout(function(){
                    html2canvas($("#cropper-box")[0], {
                        useCORS: true,
                        dpi: window.devicePixelRatio * 2,
                        allowTaint: true,
                        canvas: canvasBox,
                        scale: scale,
                        width: width,
                        height: height,
                        onrendered: function(canvas) {
                            try {
                                // æ˜¾ç¤ºå¼¹çª—å’Œé®ç½©
                                $('.van-popup--center').css('display', 'inline-block');
                                $('.shade-box').css('display', 'inline-block');
                                
                                // è®¾ç½®ç”Ÿæˆçš„å›¾ç‰‡
                                $('#head_img').attr('src', canvas.toDataURL());
                                
                                // è®¾ç½®ä¸‹è½½é“¾æ¥
                                $('#down_button').attr('href', canvas.toDataURL());
                                $('#down_button').attr('download', 'å›½åº†å¤´åƒ.png');
                                
                                // æ˜¾ç¤ºä¸‹è½½æŒ‰é’®
                                $('#down_button').css('display', 'inline-block');
                                
                                // æ¢å¤æŒ‰é’®çŠ¶æ€
                                $("#create .button-text").text(originalText);
                                $("#create").removeClass("loading");
                                $("#create").prop("disabled", false);
                                
                                // æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
                                showNotification('å¤´åƒç”ŸæˆæˆåŠŸï¼', 'success');
                            } catch (error) {
                                console.error('å›¾ç‰‡ç”Ÿæˆé”™è¯¯:', error);
                                showNotification('å›¾ç‰‡ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
                                $("#create .button-text").text(originalText);
                                $("#create").removeClass("loading");
                                $("#create").prop("disabled", false);
                            }
                        },
                        onerror: function(error) {
                            console.error('html2canvasé”™è¯¯:', error);
                            showNotification('å›¾ç‰‡ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
                            $("#create .button-text").text(originalText);
                            $("#create").removeClass("loading");
                            $("#create").prop("disabled", false);
                        }
                    }); 
                }, 10);
            } catch (error) {
                console.error('åˆå§‹åŒ–é”™è¯¯:', error);
                showNotification('åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
                $("#create .button-text").text(originalText);
                $("#create").removeClass("loading");
                $("#create").prop("disabled", false);
            }
        });

        // ç‚¹å‡»é®ç½©å…³é—­å¼¹çª—
        $(document).on('click', '.shade-box', function(){
            $('.shade-box').css('display', 'none');
            $('.van-popup--center').css('display', 'none');
        });
        
        // ä¸‹è½½æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        $(document).on('click', '#down_button', function(e) {
            e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
            
            // æ·»åŠ ä¸‹è½½åé¦ˆ
            var originalText = $("#down_button .button-text").text();
            $("#down_button .button-text").text("ä¸‹è½½ä¸­...");
            $("#down_button").addClass("loading");
            
            try {
                // è·å–å›¾ç‰‡æ•°æ®
                var imgData = $('#head_img').attr('src');
                if (!imgData || imgData.indexOf('data:image') !== 0) {
                    throw new Error('å›¾ç‰‡æ•°æ®æ— æ•ˆ');
                }
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                var downloadLink = document.createElement('a');
                downloadLink.href = imgData;
                downloadLink.download = 'å›½åº†å¤´åƒ.png';
                
                // è§¦å‘ä¸‹è½½
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€å¹¶æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
                setTimeout(() => {
                    $("#down_button .button-text").text(originalText);
                    $("#down_button").removeClass("loading");
                    showNotification('å¤´åƒä¸‹è½½æˆåŠŸï¼', 'success');
                }, 1000);
                
            } catch (error) {
                console.error('ä¸‹è½½é”™è¯¯:', error);
                $("#down_button .button-text").text(originalText);
                $("#down_button").removeClass("loading");
                showNotification('ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
            }
        });
    });
    </script>
</br>
</body></html>